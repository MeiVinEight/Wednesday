buildscript {
	repositories {
		maven { url 'https://mirrors.cloud.tencent.com/gradle/'}
		maven { url 'https://mirrors.cloud.tencent.com/nexus/repository/maven-public/' }
		maven { url 'https://maven.aliyun.com/repository/gradle-plugin' }
		maven { url 'https://maven.aliyun.com/nexus/content/groups/public' }
		maven { url 'https://maven.aliyun.com/nexus/content/repositories/jcenter' }
		maven { url 'https://maven.aliyun.com/repository/jcenter' }
		maven { url 'https://maven.aliyun.com/repository/google' }
		maven { url 'https://www.jitpack.io' }
		maven { url 'https://central.sonatype.com/repository/maven-snapshots/' }
		mavenCentral()
		gradlePluginPortal()
		google()
	}
}

plugins {
	id 'java'
}

repositories {
	maven { url 'https://mirrors.cloud.tencent.com/gradle/'}
	maven { url 'https://mirrors.cloud.tencent.com/nexus/repository/maven-public/' }
	maven { url 'https://maven.aliyun.com/repository/gradle-plugin' }
	maven { url 'https://maven.aliyun.com/nexus/content/groups/public' }
	maven { url 'https://maven.aliyun.com/nexus/content/repositories/jcenter' }
	maven { url 'https://maven.aliyun.com/repository/jcenter' }
	maven { url 'https://maven.aliyun.com/repository/google' }
	maven { url 'https://www.jitpack.io' }
	flatDir { dir 'libs' }
	mavenCentral()
	gradlePluginPortal()
	google()
}

group = "org.mve"
version = "1.0.0-Lambda"
java.sourceCompatibility = JavaVersion.VERSION_17
java.targetCompatibility = JavaVersion.VERSION_17

dependencies {
	implementation project(":Woden")
	// https://mvnrepository.com/artifact/org.fusesource.jansi/jansi
	implementation group: 'org.fusesource.jansi', name: 'jansi', version: '2.4.2'
	// https://mvnrepository.com/artifact/top.mrxiaom.mirai/overflow-core
	implementation group: 'top.mrxiaom.mirai', name: 'overflow-core', version: '1.0.8'
	// https://mvnrepository.com/artifact/org.ow2.asm/asm
	implementation group: 'org.ow2.asm', name: 'asm', version: '9.9'
	implementation group: '', name: 'mysql-connector-j', version: '9.5.0'
	implementation group: '', name: 'ReflectionFX', version: '-SNAPSHOT'
}

tasks.register('sourceJar', Jar) {
	dependsOn classes
	archiveClassifier = 'sources'
	from sourceSets.main.allSource
}

tasks.register("run", JavaExec)  {
	group = "run"
	classpath = sourceSets.main.runtimeClasspath
	mainClass = "org.mve.Main"
}

tasks.register("runWoden", JavaExec) {
	group = "run"
	classpath = sourceSets.main.runtimeClasspath
	mainClass = "org.mve.woden.Woden"
}

tasks.jar.configure {
	destinationDirectory = file("libs")
	finalizedBy(sourceJar)
}